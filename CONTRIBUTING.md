## 贡献指南

### 准备工作

在开始之前,你应当:

- 已在你的电脑上安装必备环境。
    - [Git](https://gitforwindows.org)
    - [Node.js](https://nodejs.org/zh-cn)
    - npm
        - > node.js在安装时会自带npm,但通常不是最新版,请查阅网络以更新npm。
    - 这是QingFeng使用的开发环境,为了避免奇怪的问题,建议使用相近或高于此版本的环境。
        - Node.js 22.9.0
        - npm 10.9.0
- 你熟悉[Markdown基本语法](https://markdown.com.cn/basic-syntax/),并了解[Docusaurus提供的扩展语法](https://docusaurus.io/zh-CN/docs/markdown-features)。
    - 为了方便基础较弱的小白参与文档编辑,请尽量避免使用MDX语法和React组件。
        - 这是因为MDX语法判定相当严格,很容易产生编译错误。
        - React也需要额外的学习成本。

### 基础教程

此章节将会教你最基本的如何为此仓库做出贡献。

> [!NOTE]
> 在开始之前,你需要先[Fork](https://github.com/XtremeWave/WebSiteDocs/fork)一份自己的仓库。

克隆仓库到本地,并运行一个开发服务器:

```bash

git clone git@github.com:<你的GitHub用户名>/XtremeWaveModDocs.git
cd XtremeWaveModDocs
npm install
npm run start

```

如果一切正常,他会提示下方内容:

```
[INFO] Starting the development server...
[SUCCESS] Docusaurus website is running at: http://localhost:3000/
```

这就意味着npm已在3000端口打开了一个开发服务器,你可以通过浏览器访问它。

> [!Warning]
> 如果你想要关闭此服务器,请在终端按下Ctrl + C组合键。\
> 无论你是否需要继续运行这个服务器,不要直接关闭此终端。

使用Git提交,并推送到远程仓库:

```bash

git add --all
git commit -m "提交信息"
git push origin main

```

> [!WARNING]
> `--all`参数将提交所有更改,请确保你在提交时没有提交无关文件。

然后你可以通过GitHub打开一个Pull Request,打开后我们会尽快审核并合并你的修改。

> 此章节省略了构建命令,因为我们不需要在本地构建验证。\
> 如果你需要构建,请查询官方文档。

### 新建文档

你可以参考已有项目FinalSuspect来新建文档。\
所有需要的配置(添加导航栏,生成侧边栏)请见下文。

如果你看完文档仍不了解如何配置,请在打开Pr时说明。

#### `_category_.json` - 文件夹目录配置

示例:

```json
{
  "label": "教程",
  "position": 2,
  "link": {
    "type": "generated-index"
  }
}
```

这个文件将允许你定义文件夹在侧边栏的显示方式。\
`label`为显示名称,`position`为在侧边栏显示的顺序(正数第x个)。\
下面的`generated-index`我也没看明白,但如果你不写这个会导致此文件夹无法作为目录访问,一般而言还是写上比较好。

#### `docusaurus.config.js` - 站点基础配置

这是站点基础配置文件。\
要修改导航栏请搜索`items`,随后将你的文档配置填入到对应位置。
> 这里存在两个`items`,请填在`type`是`dropdown`的那里。

以下是示例配置:

```javascript
{
    type: 'docSidebar',
    sidebarId: 'FinalSuspectSidebar',
    label: 'FinalSuspect',
},
```

> 请将配置中的`sidebarId`替换为你自己配置的,具体是什么请见下方`sidebars.js`配置。

#### `sidebars.js` - 侧边栏配置

此配置文件相对于前面的就很简单了,只需要一行。

以下是原文件代码片段:
```javascript
const sidebars = {
  FinalSuspectSidebar: [{type: 'autogenerated', dirName: 'FinalSuspect'}],
};
```

请复制一行在下面,随后将`FinalSuspectSidebar`改为`<需要添加的模组全称>Sidebar`。
> 这里的`FinalSuspectSidebar`就是`sidebarId`(见上文)。

`dirName`是相对于`/docs`路径的文件夹。\
这个光看配置应该就非常简单了,就是你的模组文档所在的文件夹,也就是模组全程。

> 补充: 为了方便区分各模组文件夹,你的文档根文件夹应当是模组全称。

#### `.md`文件元数据 - Front matter

一个文档的Front matter应该是像下面这样:

```md
---
title: 标题
description: 文档描述
sidebar_position: (整数值)
---
```
我们会逐个介绍。

##### title

文档标题,但一般而言不需要填写。\
Docusaurus会自动使用网页内的第一个一级标题(#)。

> 扩展:你不应该在网页插入多个一级标题,这不利于SEO。

##### description

文档描述,你仍然不需要填写。\
Docusaurus会自动使用文档的(不包括一级标题)第一行来作为描述。
> 但有时候Docusaurus的自动选取效果不理想,例如第一行可能是个二级标题,也有可能获取的内容有点不太恰当。\
> 这个时候你可以通过自定义description来自定义网页描述。

文档描述会展示在文件夹目录中,因此你在写完所有文档的时候去目录大致看一下有没有什么展示内容刚好不太恰当,并去自定义他。\
描述不需要控制在刚好能全部显示,因为每个人的屏幕尺寸不一样,而且就十几个字也不利于SEO。

##### sidebar_position

定义文档在侧边栏的显示顺序(正数第x个)。\
一般不填写。\
但我们推荐你在写教程分类的文档(注意是教程)的时候配置一下,否则可能会显得你这个文档有点乱。\
你总不能让`更新`排在`下载安装`的上面吧。

配置文档简介的时候也建议配置一下,将配置为1。
> 你的文件夹配置(见上文)也需要因此调整,将`position`配置为从2开始。

### 文档分版

> [!Warning]
> 由于此机制较为复杂,不利于贡献者贡献,我们不太推荐你在本地执行再推送——\
> 你有可能会把整个文档搞混。
>
> 请让我们在Pull request合并后来完成并处理好相关事宜。

文档分版意味着此版本的文档已完成,不再需要后续维护(即意味着此版本文档已归档)。\
有关此功能的详细信息,请参阅[官方文档](https://docusaurus.io/zh-CN/docs/versioning)。

> [!NOTE]
> 为了保证我们于服务器上的构建速度,在你编写出5-10个版本的文档后,我们会开始删除较早版本的文档。

> [!NOTE]
> 你还需要额外配置版本导航以提供访问旧版本的选项。\
> 为了方便统一,在Pr合并后我们会为你添加相关配置。

## 注意事项

### 文档命名

#### 保持英文

为了避免因中文兼容性导致的Bug,你应当保证:
- 所有的文件、文件夹名称应仅包含英文。
- 尽量避免特殊符号,这可能导致Git的兼容性问题。

#### 命名规则

您应当遵循帕斯卡(又称大驼峰)命名法,即每个单词的首字母大写。\
该规则适用于文件、文件夹名称。

### 标题命名

为确保SEO(Search Engine Optimization,搜索引擎优化)效果,请遵循以下规则:

- 每个页面应有且只有一个一级标题。
- 标题可以包含中文,但不应包含特殊字符,且不宜过长。
- 描述可以留空,文档将自动获取。
  - 但我们推荐您填写,且为了保证效果,请尽量填写在100-140字符之间。

### 相对链接

我们在未来会加入多语言支持(i18n),这时若您使用绝对路径(以斜杠`/`开头),在若翻译时未进行修改,会导致出现指向错误语言的链接。\
您大可以选择在翻译时进行修正,只要你不觉得一个一个加太麻烦。\
有关相对路径的更多信息以及如何正确使用相对链接,请查阅网络。

### 克隆仓库

尽管主开发一般会先推送到`dev`分支,随后再通过Pr合并到`main`分支,但仍请您在克隆仓库时选择`main`分支。\
这只是因为我们想检验Actions运行效果的同时不违反分支保护规则。
> GitHub不允许2个仓库(主仓库及复刻仓库)处于一个账户上。

### 图片托管

为了统一管理,我们会在未来将所有图片托管至XtremeAPI。\
因此,您不应该再将图片放置在`static`文件夹中。\
您可以通过以下方式托管图片:

- 使用XtremeAPI,需要向我们申请。
- 使用其他图片托管服务,或使用自建。
  - 您需要保证此服务在中国大陆的响应速度以及其稳定性。